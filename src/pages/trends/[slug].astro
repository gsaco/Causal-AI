---
import DocLayout from "@layouts/DocLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const trends = await getCollection("trends");
  return trends.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }));
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();
const { data } = entry;
const evidence = Array.from(new Set([...(data.foundational ?? []), ...(data.new_wave ?? []), ...(data.debates ?? [])]));
---
<DocLayout title={`${data.title} - Causal-AI`} description={data.summary} headings={headings} evidence={evidence}>
  <span data-pagefind-filter="type:trend" hidden></span>
  <span data-pagefind-meta="type" hidden>trend</span>
  <span data-pagefind-meta="title" hidden>{data.title}</span>
  <Content />
</DocLayout>
